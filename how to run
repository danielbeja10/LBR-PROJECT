# 🔧 הוראות להרצת פרויקט LBR עם QEMU

### ✅ שלבים להרצה מלאה:

1. 🧠 ודא שהקוד שלך מקומפל:
    - קובץ הקרנל: `lbr_driver.ko`
    - קוד משתמש: `test_user`

    תוכל לקמפל עם `make` או ידנית:
    gcc test_user.c -o test_user

2. 🖥️ מה-Windows / WSL — להריץ את `run.sh`:

    ```bash
    ./run.sh
    ```

    זה מעלה את QEMU עם Ubuntu, ומשתף את התיקייה שלך ל־/mnt/host

3. 🧩 בתוך QEMU (Ubuntu):

    - אם לא בוצע אוטומטית, להריץ:

    ```bash
    sudo mount -t 9p -o trans=virtio hostshare /mnt/host
    ```

4. 🧰 להריץ את הסקריפט `vm_init.sh` שמכניס את הדרייבר:

    ```bash
    chmod +x /mnt/host/vm_init.sh
    /mnt/host/vm_init.sh
    ```

    או לעשות ידנית:

    ```bash
    sudo insmod /mnt/host/lbr_driver.ko
    dmesg | tail -n 30
    ```

5. 🧪 לבדוק שהמכשיר נוצר:

    ```bash
    ls /dev/lbr_device
    ```

6. 💻 להריץ את קוד המשתמש:

    ```bash
    ./mnt/host/test_user
    ```

7. 🧼 כשמסיימים:

    ```bash
    sudo rmmod lbr_driver
    ```

---

### 💡 טיפים:

- הקבצים מ־Windows נגישים בתוך QEMU בנתיב: `/mnt/host`
- תוכל לנתב פלט לקובץ עם: `./test_user > output.txt`
- לא לשכוח `make clean` לפני קימפול חדש
- דרייבר שנכשל יופיע בשגיאות `dmesg`

